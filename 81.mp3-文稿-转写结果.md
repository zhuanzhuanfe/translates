在本期全栈收音机中，我与Vue.js的创建者Evan You谈论高级组件设计概念，以及如何使用Vue的一些功能（如Scoped Slots和Render Functions）来创建比只是UI小部件，这是完整的叠加电台第81集，每个人都欢迎来到另一集的全栈无线电播放。

我是你的主持人Adam Wathan，今天我很高兴与Vue.js的创造者Evan You再次交谈。欢迎回来Evan。怎么样？很高兴回来。是的，让你回来真好。嗯，所以我想让你回到节目中的原因是我一直在关注其他一些围绕其他JavaScript框架的社区正在发生的事情*因为duff *试图寻找有趣的人们正在做的事情我可以学习如何将它们与我每天使用Vue.js所做的工作一起应用，以及人们现在真正谈论的一个主题，或者至少我注意到它更像是高阶组件和渲染道具组件和反应世界中的东西。

呃，所以我觉得有必要对你的一些想法进行讨论并谈谈他们如何转化为Vue以及你可以用Vue做的各种事情来解决人们遇到的同样类型的问题试图解决这些模式。因此，开始的最佳地点也许就是开始，或许可以了解这些想法甚至是什么以及它们对什么有用。嗯。所以也许我们从更高阶的组件开始。当人们在反应世界中谈论它时，什么是更高阶的组件？你如何用Vue解决这些问题？

所以，嗯，我认为这句话有点过载，因为我认为对他们真正的内容有相当多的误解。我并不认为有一种非常类似于确定类似滚动的来源基本上是高级组件高阶组件实际上的写下规则。呃，但是，高阶这个词真的来自函数式编程，你有更高阶的函数。嗯，只是简单地说，我认为它只是指使用其他函数组成另一个函数，用其他函数组成一个函数。所以这个，呃，最终函数将在内部调用其他函数。所以它有点，呃，包含其他函数的功能，但是啊，在它之上添加一些额外的功能。

嗯。所以更高阶的组件，呃，首先它起源于反应世界，主要是因为反应组件是非常接近功能的。对？ react中的无状态功能组件只是函数啊，这意味着你可以从一个组件中的另一个组件返回另一个函数。嗯，在某种意义上，高阶组件的最简单形式只是一个功能组件。他们返回另一个组件，呃，作为它的根节点。对？任何反应，所有组件都是你通过的一切。组件只是道具。所以，当你，嗯，说有一个内部组件，并且你想基本上给这个内部使用这个内部组件，但是呃，传递一些预定义的道具。
嗯，所以你可以创建一个返回这个内部组件的包装器组件，但同时传递一些已经定义的道具。所以这可能不是一个非常有用的例子。但基本上我们正在做的只是你为这个内部组件创建了另一个接口。最后他们渲染了同样的东西。但是，当你使用这个外包装组件时，你不再需要传递这些额外的道具和你自己。呃，这个快速的组成部分正在为你做这个词。是啊。所以这是最简单的。一个高阶组件的例子实际上是一个概念，就像部分函数应用程序一样。是啊。是啊。它实际上非常相似。所以我看到人们谈论我认为的另一件事可能就是更有趣的是组件的想法，除了呃道具，让你控制该组件应该如何呈现之前，像外面的权利，人们谈论这些是渲染道具组件，我看到人们用他们所谓的高阶组件来做类似的事情。但我认为渲染道具更有趣。那么你是否介意可能正在谈论这一点以及Vue的确如此。嗯，如果你知道渲染函数在Vue中是如何工作的，你就会知道你在任何你能做的任何事情和反应你都可以在Vue中使用渲染函数。

嗯，因为其他两个进入两个系统的时候都处于虚拟下层，它们非常相似，呃，就构图能力而言，呃和渲染道具中的渲染道具更像是反应世界渲染道具更多在你作为道具传递功能的意义上是直截了当的。该功能将由子组件调用。并且子组件将在它导致它时传递一些um，这个函数的参数。而这个函数的工作是返回一个虚拟DOM结构，呃，然后由子组件自己的虚拟DOM树组成。

嗯，这实际上是允许子组件公开嗯，部分呃，虚拟DOM树给父母允许父母决定在这些部分中呈现什么。啊，与此同时，使用一些可能只有子组件可以访问的数据。对。从某种意义上说，这看起来非常像插槽。啊，与我们在Vue.js中熟悉的静态插槽的区别在于嗯，这些插槽是动态的。他们从子组件接收数据。是啊。所以也许在我们进一步感兴趣之前，有点想谈谈在Vue中从正确的访问范围感觉看起来是什么样的普通插槽。对。就像你正在构建一个具有接受插槽的子组件的Vue组件一样，你可以将标记传递到将在子组件插槽中进行渲染的子组件，但是你只能访问类似于父母的范围。对。是啊。

因此，我认为在我们继续前进之前，我可能会有一些其他的东西，我只想给出一个渲染道具组件的例子。所以人们有一种理解，我认为就像我最初看到的那个例子，可能是一个很好的帮助人们理解的例子，就像说你需要在你的应用程序中有这样的行为，能够跟踪像鼠标的位置那样您的应用中的所有需要​​的不同组件，例如访问最多位置。而你正试图想出一种方法，使这种行为更像是便携和可重复使用，并像一个单独的家一样。你做的就像渲染道具组件一样，至少在做出反应时，你可能会有一个名为uh track mouse or something的组件。它看起来像你放入标记的标签。在它内部，你像渲染函数一样传入，现在渲染函数接受鼠标光标的位置，现在你从传入的函数返回的标记可以访问那些。因此，它可以基于该数据做出关于它应该如何渲染自己的决定。因此，您可以保留所有关于确定鼠标在哪个位置的逻辑，就像跟踪鼠标组件一样。您可以使用它来组合所有这些组件的其他组合。

啊，没有重新实现那个逻辑或任何东西。而且我认为这就是让它变得非常有趣的原因。是的，所以它实际上是转向组件所以理解组件将我们通常如何使用组件，这是一种视觉组合成某种逻辑组合，其中组件并不真正负责说呃渲染一些视觉结构而是它封装了一些逻辑嗯并公开最终数据，以决定如何实际渲染可视部分。是啊。这真的很有趣，因为我认为很多人，特别是那些可能是Vue.js新手或者只是用它的人，也许简单的用例只是真的不喜欢我想象的一些东西当你想到类似组件只能处理逻辑并且不处理太阳穴时，你可以做到这一点。就像每个人一样，当他们第一次介绍这些东西时，他们的心理模型就像一个组件，就像屏幕上的小部件，呈现出一些东西。你知道我的意思，我认为这有点像我在这次谈话中谈论的最有趣的事情，就是试着谈谈除了在屏幕上渲染小部件之外你可以做的事情。这有助于人们扩展他们的想象力并找出他们可以做的不同事情。所以我要回到我们正在谈论的内容。嗯，我们在谈论老虎机。对？所以，我们已经讨论过静态插槽以及它们是如何工作的。

嗯，所以范围插槽，呃，在Vue.js我会说它基本上相当于渲染道具的反应。嗯，因为我们考虑范围很多时，他们是，你有这个插槽范围um属性，你将在其中接收子组件传递给你的数据。嗯。所以这就像函数所期望的参数。对？如果你正在使用渲染道具，那么范围槽的主体本质上是呃，那就是你从渲染道具函数返回的JSX。是啊。在那里，您可以访问传入的任何数据。

嗯，所以范围插槽，呃，在Vue.js我会说它基本上相当于渲染道具的反应。嗯，因为我们考虑范围很多时，他们是，你有这个插槽范围um属性，你将在其中接收子组件传递给你的数据。嗯。所以这就像函数所期望的参数。对？如果你正在使用渲染道具，那么范围槽的主体本质上是呃，那就是你从渲染道具函数返回的JSX。是啊。在那里，您可以访问通过插槽范围传入的任何数据，这相当于传递给渲染道具的参数。而且你也可以访问父范围，对吧？这很酷，因为你可以在那里做一些有趣的事情。

是啊。我认为范围内的插槽组件很容易像Vue文档那样容易浏览，而不是真正认识到它的强大功能。所以我有兴趣听到你的消息。比如，有些示例可能是从您可以使用作用域插槽组件的简单示例开始的。然后，也许我们可以进入一些你可以用scopes slot组件做的更有趣的事情。当然。嗯，通常情况下，我通常给出的基本示例是当你正在考虑过去的列表组件时。嗯，所以这种过渡从仍然像想到组件作为官方组合单元，嗯，所以如果我们构建un真的像基本列表组件，你会认为这是组件将负责渲染其中的一切。你知道，它会呈现包含所有这些列表项的UL元素。它还会渲染每个列表项。因此，样式，结构以及视觉和逻辑的所有内容都被包含在这个组件内部，嗯，这使它变得可移植。但是，它也不太灵活，因为在很多情况下，正确的，列表组件有两个部分可以处理。对？每个项目都有你如何知道布局，CSS以及每个项目最终应该如何看待。

这是它的视觉方面。这是合乎逻辑的一面。例如，您可能希望将其设为虚拟滚动组件。您可能希望实现无限加载。您可能希望有一些不错的功能就像当您滚动时会有一些小工具提示，它们会跟随您了解您可能希望能够在多个位置重复使用的所有这些功能。你可能想要一个通用的这个组件来封装虚拟滚动，无限加载和其他东西。但是，在您的应用中，您可能希望项目看起来不同。

对？所以现在我们遇到了这个问题，因为在我们的第一次迭代中，事物视觉方面的逻辑方面耦合在同一个组件中。是啊。所以也许在这里画一幅画，就像这个组件从外面看起来是什么样的？如果我们采用这种类似于基本天真的方法，那么IT就像你的标记中的标记，它可能接受作为道具的项目。这就是它的用途。对？你有一个开场标签，一个结束标签，一个物品道具的访问权限。从消费者的角度来看，你已经完成了。其他所有内容都在组件内部处理。对？这是我们刚开始的基本情况。

因此，进入像逻辑元素和视觉元素类型的分离，如果您试图利用像范围的插槽组件方法那样，它们看起来是什么样的。所以，假设你现在想要说你实现这个列表组件，你觉得它很不错。我们拥有所有这些高级功能。但是，嗯，你在主要部分使用它。如果您的应用可能正在显示呃项目列表。

现在，您实现了另一个功能，并且单击了prop，您需要显示已为此项目做出贡献的成员列表。因此，您拥有此人员列表，每个人员项目和每个项目项目都具有完全不同的布局。对？所以即使数据源也不同。所以现在你遇到了问题，因为你基本上硬编码了前一个列表组件中项目的结构。现在你想减少逻辑部分，但你想改变，嗯，改变你想要现在渲染人的每个项目。对？所以，嗯，一个天真的方法是你只需强制组件，复制所有内容并更改呈现项目的部分。但是，显然，你知道，重复使用你已经做过的东西。因此，您希望让每个项目都由消费者自定义一个碗。是啊。你基本上你想弄清楚这些之间有什么不同，并以某种方式使参数化完全正确。所以在Vue.js中我们的道具通常只是数据，对吧？你只传递道具的原始数据。嗯，所以呃

现在，您实现了另一个功能，并且单击了prop，您需要显示已为此项目做出贡献的成员列表。因此，您拥有此人员列表，每个人员项目和每个项目项目都具有完全不同的布局。对？所以即使数据源也不同。所以现在你遇到了问题，因为你基本上硬编码了前一个列表组件中项目的结构。现在你想减少逻辑部分，但你想改变，嗯，改变你想要现在渲染人的每个项目。对？所以，嗯，一个天真的方法是你只需强制组件，复制所有内容并更改呈现项目的部分。但是，显然，你知道，重复使用你已经做过的东西。因此，您希望让每个项目都由消费者自定义一个碗。是啊。你基本上你想弄清楚这些之间有什么不同，并以某种方式使参数化完全正确。所以在Vue.js中我们的道具通常只是数据，对吧？你只传递道具的原始数据。嗯，所以你传递视觉结构的方式是使用插槽，但静态插槽并不能真正让你访问子范围内的数据。对？所以作用域的插槽填补了那个间隙呃，其中父组件能够通过，嗯，视觉结构，你知道元素到子组件。同时，子组件可以为父组件提供呈现每个项目所需的数据。是啊。因此，如果你想在这里做一个类比，或者试图建立它的心理模型，它几乎就像是作为范围槽的槽。它就像另一个道具，但它就像一个布局道具或模板道具。

是啊。所以这个道具对你回来负有责任。好吧？嗯，就像在渲染函数中返回JSX一样。是的，我觉得这很有趣。因此，如果我们要考虑这个实际上看起来是什么样的，并且与之前讨论的例子相比，你有类似的事情你喜欢，嗯，也许它就像一个项目列表是组件的名称或其他什么，它有一个项目道具，你传递这些项目。嗯，但现在，而不是没有内容，只是留下所有的逻辑，并呈现给子组件的内部，你'我在其中有一个额外的标签，我想在某个版本之前，它们必须像模板标签或其他东西。但现在我可以做任何事情。所以也许你喜欢潜水，你必须，也许它是一个默认的插槽，但它也是一个名称插槽。对？所以说它就像插槽等于项目，这是它应该用于每个项目的模板。然后你有这个插槽范围参数，它接受子组件需要回馈给你的任何东西。所以也许最简单的情况就是一次只给你一个项目，你可以决定如何渲染它。所以现在不要让你的人员在你的项目列表中列出就像两个重复的组件一样，你只需要这种通用的项目列表来处理它们之间的所有共享逻辑，而只是关于它们应该如何应对的那个小的不同模板每个项目应该看起来略有不同，只能住在你使用它们的地方。如果你想，我猜你甚至可以将它们捆绑到自己的组件中。对？所以你仍然可以有一个项目列表组件和人员作为组件，但在内部他们就像是由这个项目列表组成，而这只是在两者之间标记电话的一小部分。究竟。

[广告]

所以我认为这是一个非常好的简单示例，说明如何创建一个将一些数据传递回父级的组件，但仍然可以自行完成一堆渲染。但是我已经看到了一些更高级的高级示例，比如鼠标，例如呃那个组件实际上根本不会渲染任何东西。呃那么在Vue中构建一个只负责逻辑的组件并且实际上并没有提供它自己渲染的任何模板。

通常当你做这样的事情时，渲染函数会更方便，因为你会在很多情况下，如果你使用渲染函数，那么在那里传递范围的插槽，呃，在一个属性上实例称为。$ scopedSlots，它对应类似于命名槽和呃默认槽。你会有这个。$ scopedSlots默认，呃，如果它在那里将是一个函数。嗯。因此，您调用此函数并传递您将传递到插槽的任何数据。啊，对吧？因此，无论您传入其功能，都可以在潜望镜中作为插槽范围使用。

那个范围槽功能返回了什么？所以它返回虚拟节点，对吗？嗯。它返回虚拟节点，然后您可以使用它们。呃，你可以在渲染功能中返回啊。所以你会在里面，呃，你会称之为范围插槽函数的渲染函数，它会为你提供虚拟节点。呃，在某些情况下，它可能会让你回到节点数组中。但嗯，通常，你需要呃，不能像那个阵列中的一个节点那样挑选。并确保您只从子渲染函数返回一个节点，因为您知道，有状态组件的限制是您的渲染函数是返回一个节点。所以，呃，在大多数情况下，呃，你会认为它就像范围插槽只是那些可以为你提供虚拟节点的功能。您可以将其与其他节点组合，也可以直接返回这些节点。是啊。而且我认为就像我最常见的那样，当有人试图构建这样的组件时，模式通常只是一个渲染函数。

它所做的就是回归这一点。 dot uh scope slot dot默认传递一些计算的um结果。这就是整件事。所以我觉得在这里讨论一下可能有趣的是我认为很多人，使用Vue根本不使用渲染功能，因为他们喜欢这样的想法，如果我要使用渲染函数，我也应该使用JSX。直到我开始玩这样的人之前，我才是其中一个人。这些模式中的一些，当我意识到实际上像渲染函数仍然有用时，即使你没有使用JSX，因为大多数时候他们不需要真正做任何事情。对？完全。所以我有兴趣听到有什么其他有趣的东西，或者有点像你对它的看法，比如使用没有JSX的渲染函数，所以关于um的全部观点，我认为JSX只是为了缓解采用在JavaScript中表达HTML结构的想法。

对？嗯。因此，如果你使用没有JSX的反应，你会写一些像我返回react.createElement h1，blah，blah，blah。如果你一遍又一遍地这样做，那将是非常冗长的。你知道，对于很多人来说，它可能是一个很大的转折，所以JSX或多或少都是这样，呃，从某种意义上说，这种可用性差距很小。呃，它实现了它，当你提供大量静态标记时，它确实有很大帮助，对吧？因为你不再呃，不得不这样做。它也是JavaScript之间的桥梁，在这个意义上是一个HTML，嗯，但是因为你的反应，你必须在任何地方使用渲染函数。

所以这就是为什么JSX，呃，更多，呃，或多或少在这种情况下使用更有用。因为呃，任何时候你需要在反应渲染函数中表达一些HTML结构，嗯，你还在处理JavaScript。所以JSX本质上是，嗯，改进了正确的，呃，在JavaScript中编写这些结构的可用性问题。对？但是在Vue中，故事有点不同，因为，嗯，你不需要在任何地方使用渲染功能。我们已经拥有了首先接近HTML的模板。

嗯，所以在你处理的任何地方，像视觉结构这样的HTML，嗯，你已经可以使用模板了。我们只是，呃，通常我们只提供一些特殊用途的组件，比如这些，你知道，呃，范围的插槽组件。是的，对。如果你提供这个呃，鼠标控制组件或一些非常先进的，嗯，逻辑组件，呃，你的逻辑将用JavaScript实现，而且无论如何都没有太多的结构。对？大多数逻辑仍然只是在玩JavaScript。

呃，所以它真的像JSX在这些用例中没有太大的区别。无论如何。是的，我认为我发现有趣的是当我实际上需要使用渲染函数来组件不包含任何地方的单个标签声明时，因为它实际上只是返回默认的um，slot或默认的作用域槽。而且我觉得很有意思的是，很多人可能没有意识到或者可能有助于弥合人们之间的差距，就像理解当你以这种方式提供对手并且你传入一个范围的插槽甚至只是一个普通的插槽，这些组件不需要像你曾经常常拥有的那样额外的包装元素，你知道我的意思，因为你可以直接返回传递给你的节点。现在这个组件实际上并没有提供任何新的标签或类似的东西。对？所以你可以想到呃，组件A不会呈现它自己的任何结构。相反，它只是返回呃，组件B是的，它真的很酷。有些东西让我注意到，嗯，希望不仅仅是我最初没有意识到这一点或者没有想到它的是我们在Vue中看到的很多标签，嗯，就像在文档中一样即使那些感觉像Vue的特殊功能，比如保持活动标签或过渡组或过渡标签，它们实际上并不是特别的。它们不像Vue的特殊功能。 Vue以特殊的方式编译。它们实际上只是用渲染函数实现的无聊组件，就像我们正在讨论的那样。所以我认为有可能听到更多关于过渡组件等基础实现的更多信息，例如，对于人们来说理解和帮助可能会很有趣，呃，你知道，激发一些关于什么的想法当你采取某种压力作者的事情时，你可以做到。那么过渡组件实际上如何运作？

呃，所以过渡组件，呃，有趣的是，呃，可能不是这个的完美样本，因为它确实有一些，呃，呃，依赖于内部实现。转换组件更像是我们公开收集的接口，呃，钩子以及要在运行时指定的类。啊哈，其中，呃，还有，呃，负责处理其他过渡模式。嗯，但是一些较低级别到较低级别访问的东西，如实际处理DOM处理添加和删除类是在较低级别虚拟dom中的模块。

嗯，但我能得到，嗯，所以过渡组件仍然是有价值的，当你像它实际上做的那样研究嗯，它基本上是你在其中给予的任何东西。呃，作为一个正常的插槽。它需要掌握那些呃元素。虚拟节点表示该元素的虚拟节点。然后就是呃，用一些额外的钩子来增强那个节点。好的，所以然后返回相同的节点。是的，这没有意义。所以它更像是传递一些你传递给它的东西，呃，增强那个节点，然后返回相同的节点。因此，当该节点传递给虚拟DOM引擎时，虚拟引擎最终将呈现完全相同的东西，除非是因为这些额外的钩子。呃，虚拟DOM引擎中的转换模块知道当插入或删除此节点时，我们需要做一些额外的事情。这就是所有组件都在做的事情。

我是否正确地说过渡组件可以在用户土地上实施？如果你想？就像我想的那样，就像我试图想要解决的一些有趣的事情，就像你在Vue中看到的那些组件一样，你试图理解它们有什么特别之处，或者它们真的只是一些有趣的例子更有创意的组件设计？嗯，我会说呃内置的正确过渡和保持活力，他们确实有一些依赖于某些特殊的内部机制，使它们有用。其他这就是为什么我们首先将它们放入核心的原因。如果它可以完全实现用户土地，我们只需将它们分成各个库。是啊。对。呃那么另一方面，如果你考虑在Vue路由器中的um router-link和router-view那些是纯用户域组件。

是的，对。所以，路由器视图是呃，路由器视图和路由器链接都是使用渲染功能实现的，它们不依赖于Vue核心的任何特殊功能。它们只是纯粹的用户土地组件。嗯，对于转换组件来说，它依赖于内部虚拟DOM模块的原因之一是，因为，如果你不在，那么你已经有了查看Vue源的经验。嗯，Vue核心的内部被分成一个平台，不可知的运行时，呃，核心四核，核心，呃，以及一些特定于平台的代码。

所以实际处理CSS类和插入删除DOM节点的代码都在web平台啊，模块里面。是啊。所以，呃，我们不希望核心组件与特定平台紧密耦合。因此，转换组件实际上只处理转换意味着的另一个更抽象的部分，这很有趣，因为我们能够拒绝相同的转换组件逻辑并将其连接到不同的低级运行时模块，啊，比如Weex 。因此，我们在Weex中运行相同的组件，但在虚拟DOM级别具有完全不同的低级实现。

嗯，所以我认为这也是你知道的力量，抽象和组件的东西是，嗯，因为我们只处理渲染函数，我们只处理虚拟dom。在任何意义上，我们实际上并没有触及真正的DOM。因此，所有这些组件，例如这些渲染函数可以做的边界，是它们操纵这些抽象节点树结构。对？那就是，呃，这基本上是这些组件的责任范围。嗯，你操纵这些树结构并将它们返回到虚拟DOM引擎。虚拟DOM引擎最终将决定如何处理它们。

所以我觉得令人失望的一面是过渡组件真的很特别。啊，如果你想在纯粹的用户土地上做这将是非常困难的。但是，嗯，我不会说百分之百是不可能的，但是你需要真正地，非常熟悉底层虚拟DOM引擎如何能够做到这一点。是啊。所以即便如此，我仍然认为很有意思的是，转换组件就像一个组件，你知道，即使它确实有一些特殊的魔法源，嗯，就像它仍然是一个组件一样渲染功能。这最终就像是它的运作方式。对？

是的，光明的一面。从好的方面来说，过渡组件可以做的一件事是正确的。嗯，呃，你知道，它接受了很多道具。就像你可以指定什么类。它应该添加或删除。您可以指定超时或特殊JavaScript挂钩等等。呃，所以你可以编写一个更高阶的组件来简单地返回转换组件。是啊。所以这实际上是一个有趣的想法，我一直在思考，我还没有尝试过，嗯，但听起来很有趣，因为你肯定会尝试实现某种复杂的转换，只需要完成像CSS类一样，你需要下载到JavaScript钩子级别。所以，你可以做很多这样的事情，并且想出来，我认为，制作可重复使用的模式可能是呃，可能听起来像是一个具有挑战性的问题要解决，直到你意识到你可以完全正确的转换组件的包装组件，给它一个特殊的名字。然后它又回到了我们刚开始讨论的内容，就像那个组件基本上变成了部分应用的功能一样。对？完全是转换组件

[广告]

我们谈论过类似于作用域槽组件的真实基本示例。我们讨论了一些更复杂的东西，如果你不想从组件中渲染任何UI或任何东西，比如鼠标跟踪组件等，你可以做些什么。

嗯，还有其他的例子吗？你可以想到真正有趣的创意方式。你已经看到人们，嗯，用Vue设计组件，有点突破那种简单化，呃，组件是一个UI小部件模型。是啊。那么，呃，一个有趣的例子，呃，当我呃，当我在网上和某人讨论时，我想出了这个想法。他向我展示了这种可以直接以程序方式表达和异步操作的语言。所以我发现真的很有趣。我当时正在实施范围内的插槽。而我本质上是想看看在这种情况下可以做什么范围的插槽。所以我实现了这个，呃，像fetch或async或await组件。

嗯，所以这是一个组件，但你给它一个URL。你知道，它会向你的URL发送一个ajax请求，然后期望你给它一个范围的插槽。这个范围的插槽将接收，呃，关于该请求的所有数据，呃，在其参数中，呃，在其插槽范围参数中。所以你会得到一个包含请求当前状态的对象，呃，请求的代码。而且，呃，如果请求成功，请求的数据。对？所以这允许你，所以这个组件有趣地抽象出一切，呃，一个又一个，一个同步错误处理，并且所有这些都使得请求抽象出所有这些东西。相反，它为您提供了这个对象，然后您决定如何处理此对象。

因此，如果对象中存在错误，则只需渲染错误。如果有什么东西，如果它正在等待，则呈现待处理状态。如果它是呃，如果它已经完成，你只需要使用数据来渲染某些东西，呃，向用户展示。所以，嗯，直接在模板中表达所有这些逻辑。你只是使用普通的v-ifs，如v-if啊，你有错误，我们只是渲染错误。所以现在它看起来很有趣，因为，嗯，你不是在编写任何JavaScript，你不需要担心任何异步性。呃，在这个请求中，你刚开始使用那个组件。然后，呃几乎机械地只写出你想要在那个时间点看到的东西。实际上这很吸引人。所以它就像它给你一样的API，就像这样就像你想要的声明性表示一样。获取这些数据时的最终结果完全是抽象的。甚至它甚至是异步的事实，或者它将花费一些时间或任何东西。所以这很吸引人，因为它基本上就像你可以采取任何功能，并在很多方面将它变成一个组件。对？

如果你认为像传递给组件的插槽一样，就像你可能传递给函数的回调一样，那么很明显你可以像这样的异步操作抽象出来。是的，那很酷。甚至Cooler对我刚才谈到的这个异步组件的部分是我意识到它是无限的作曲家吧？即使在这个组件的范围内，你也可以使用这个组件。再次。那很有意思。所以现在你有了级联请求，所有边缘情况都得到了优雅的处理，因为这样的部分就像模板的某个部分只有在前一个请求成功时才会呈现。

是啊。对。所以，所以我用它来实现一个非常复杂的异步流，就像第一个一样。嗯，你给它一个用户名。它转到Github API，例如他所有的存储库，然后进入存储库，找出所有用户对它的贡献。所以你有几个异步请求流程的步骤，但我碰巧编写了一行你从来没有像.then或任何东西那样编写的JavaScript。让我只有一个组件，你传递给URL来获取他们的存储库。

然后在其中，你有另一个这个fetch组件的实例。我想这将是一个API请求，给定存储库ID以获得贡献者。但是因为在异步操作完成之前，该组件甚至不会呈现，所以您只需要考虑它。究竟。呃，真的很酷。是啊。还有其他你能想到的例子吗？当然。呃，我认为另一个例子不是真正的作用域插槽组件，而是更像是一个更高阶的组件。它可以使用范围的插槽。但是，嗯，我猜是呃，是反应16。他们最近有这个叫做错误边界的东西吧？嗯。因此，错误边界本质上是一种机制，允许您从子组件树捕获错误，然后决定如何处理它。

嗯。所以在Vue中，你可以做同样的事情，啊，使用我们在2.5中提供的这个新钩子，称为错误捕获。因此，您可以实现一个错误边界组件，只需返回传递给它的任何插槽。它什么也没做，呃，但是它实现了这个错误捕获的钩子，它可以捕获从它的一个子组件传播的任何错误。呃，一旦它捕获了什么，它就会在这个错误边界组件本身中切换一个标志。当发现标志被切换时，它将呈现此错误消息，嗯，立即显示它捕获的错误，并且他的短路获得通常通常不会呈现的默认插槽。因此，基本上尝试更优雅地处理错误的想法是这样的，以便像你的应用程序的其余部分一样可以继续工作，即使像某些东西变坏并且像某些孤立的部分一样。你能想到像一个现实世界的实例，可以帮助人们理解这个想法的力量吗？对？所以很酷的事情是呃，一旦你实现了这个错误边界组件，它就变得完全可重用了，采用成本实际上就像用你的DOM中的这个错误边界组件包装任何现有的组件一样，对吧？嗯和这个组件内部你可以做一些更有趣的事情，比如你可以根据生产或开发环境进行条件处理。 

呃，如果它的开发你会显示一个大红框告诉你生产中出了什么问题。您可能希望显示不同的消息，而不是您知道使用所有此代码的其他详细信息为用户提供炸弹。是啊。嗯，你会显示更优雅的信息，同时也可能会向你的错误跟踪服务发送一些东西，以获得更多相关信息。是啊。这很有道理。所以，嗯，我想也许这就像是一个开始包装的好地方，但我很想知道也许在我们去之前就像我们在这里谈到的一些东西，比如范围的插槽和呃那种东西，你有没有其他有趣的模式或你在社区中看到的任何他们认为人们应该调查和探索的项目，或者你认为值得像源头潜水的项目，以获得一些关于一些更有趣的事情的想法您可以使用Vue的组件模型。

嗯，就个人而言，对我来说，我实际上希望社区能够围绕一些更灵活，更有用的机制来巩固，而不是呃，对于使用组件的方式有非常分散的观点。但我想，了解这一点仍然非常有益。但我认为如果你想进入这个真的，我认为掌握的基本是，呃，理解渲染函数是如何工作的，理解更高阶的组件是什么，然后理解呃，什么是一个范围的插槽在它的JavaScript等价物。我认为这些确实已经走得很远了。我认为这些将覆盖99％的典型用例。如果你掌握了这些，对我来说就像是一个接受一个作用域插槽的组件，呃，用渲染函数而不是模板实现，就像我发现的那样，似乎就像你需要的所有上边界一样就像你能想出的最复杂的呃开箱即用的组件实现而言。就像到目前为止，我没有看到任何你需要的任何东西超出那个似乎提供了像我能够发现的最终的灵活性。这与你的经历一致吗？是的，完全。呃，我认为重点是，渲染功能真的就像让你充分展现JavaScript的灵活性和感觉一样，最终你们两个都能够进入我会说改变虚拟DOM差异化算法的工作方式。这只是我们不公开的事情。所以，在这种意义上，如果你正在使用Vue，渲染函数就像你将获得的金属一样接近。

是的，对。所以，呃，make，呃，在scoped slot中是最灵活的机制，它允许你说育儿，呃，执行组件组合。所以这两个结合我认为理论上会解决你能做的任何事情。所以就像是的，就像你说的那样，就像上边界一样。真棒。非常感谢再次参加这个节目。我的意思是这个东西是一个迷人的家庭，我学到了很多东西。是的，你是受欢迎的。是啊。能有机会谈论这个真的很棒，因为我个人已经在考虑这个问题了。但是，嗯，是的，我们还没有真正看到过呃，这种情况总结了这一切。我想有一些好文章在四处飘荡。啊，不幸的是，我有我的我本来没有能够，你知道，呃，写一些在某种意义上的东西，我只是想避免你对如何做的事情发表太多的意见，但我认为这是尽管如此，有助于讨论它。是啊。我认为看起来像文档中的新部分或者不一定教你的东西会很酷。这是做到这一点的正确方法。但也许只是某种有助于人们扩展想象力的东西。有点像我们一直在谈论的。就像这里你可以用组件做的事情，你可能没有意识到可以用组件做。

 你知道，我的意思就像你对我这样取得组件的例子就像一个完美的例子，可以真正让人们开始思考哇，这个东西比乍一看似乎要强大得多。嗯。是啊。好吧，我们实际上有一个呃工作进度拉请求和我们的文档，但我想我们仍然是你知道迭代。我想要确保我们没有结束，这不是过分的意见。他们也想确定它是呃，实际上，呃，正确地展示了这些机制的力量，呃，你知道，人们可以理解，实际上进入它，但那是我们已经在努力的东西。希望我们可以把它拿出来。真棒。
